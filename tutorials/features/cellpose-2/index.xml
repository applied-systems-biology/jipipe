<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cellpose II: Training on JIPipe for ImageJ</title>
    <link>https://www.jipipe.org/tutorials/features/cellpose-2/</link>
    <description>Recent content in Cellpose II: Training on JIPipe for ImageJ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language><atom:link href="https://www.jipipe.org/tutorials/features/cellpose-2/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Step 1</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step1/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step1/</guid>
      <description>Load the example pipeline.
Add a second compartment, name it Train Cellpose (red arrow 1) and open it in a tab by double-clicking it (red arrow 2).</description>
    </item>
    
    <item>
      <title>Step 2</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step2/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step2/</guid>
      <description>Drop the data folder on the UI (red arrow 1) and add the nodes List subfolders and Add path to annotations (red rectangle 2).
Configure the Add path to annotations to generate an annotation #Folder (red arrow 3). Note the # to make it recognizable by the data management system as mode to group data.</description>
    </item>
    
    <item>
      <title>Step 3</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step3/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step3/</guid>
      <description>Note that the training dataset (red arrow 1) consists of subfolders (red arrow 2) with matching pairs of TIFF and ZIP files (note 3).
The latter contains the manually annotated objects as ROIs, designed to be used by the Cellpose trainer.</description>
    </item>
    
    <item>
      <title>Step 4</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step4/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step4/</guid>
      <description>Accordingly, we need to read the TIFF and ZIP files separately.
This can be achieved by establishing two branches, one each for the two file types by the introduction of two List files nodes that we renamed to List TIFF and List ZIP in our figure (red rectangle 1).
The List files node can be configured with a filter expression to only detect specific files. In the case of the the List ZIP node, set the expression to</description>
    </item>
    
    <item>
      <title>Step 5</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step5/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step5/</guid>
      <description>Cellpose training requires label images or masks.
The can be created directly from ROI, for example via the node Convert ROI to mask, given the input image as reference (red arrow 1).
The generated mask will be dilated before being used for the Cellpose training (red arrow 2). The dilation serves the purpose of adding environment to the manual annotations, which should help the learning process (red arrows 3-5).
Setting the Radius parameter (red arrow 4) to various values may help to optimize the learning process.</description>
    </item>
    
    <item>
      <title>Step 6</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step6/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step6/</guid>
      <description>We continue with assigning the annotation masks to the actual images.
In preparation for this, we first correct the image for illumination inhomogeneities via Illumination correction 2D (red arrow 1), where we use 20 px radius for both Sigma (X) and Sigma (Y) in underlying Gaussian filter.
Both the image and the annotations are scaled (red arrows 2 and 3) with a factor of 2.5 (red arrow 4 and 5):</description>
    </item>
    
    <item>
      <title>Step 7</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step7/</guid>
      <description>Use the slot editing capabilities of Split data randomly (percentage) to create the following output slots of type Image:
Train Validate Test Then configure the percentages in the Parameters tab and the Weights category (red rectangle 1) as following:
Train set to 80 Validate set to 10 Test set to 10 </description>
    </item>
    
    <item>
      <title>Step 8</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step8/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step8/</guid>
      <description>The Cellpose training (2.x) node is then added (red arrow 1) and connected to the training (red arrow 2) and validation (red arrow 3) output of the Split data randomly (percentage) node.
The number of training epochs (red arrow 4) and the mean diameter of the object that we seek (red arrow 5) are the most important setting here.
Make sure to activate the GPU if the PC has one (red arrow 6 and 7) to expedite the learning process.</description>
    </item>
    
    <item>
      <title>Step 9</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step9/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step9/</guid>
      <description>The trained model can be saved from the cache browser (see Tutorial), and it can be used directly to visualize the segmentation quality using the test dataset.
For the latter, use the output model of the training node (red arrow 1) to guide a Cellpose (2.x) node (red arrow 2) via connecting the newly trained model to the corresponding input of the Cellpose (2.x) node (red arrow 3).
The data input of the Cellpose (2.</description>
    </item>
    
    <item>
      <title>Step 10</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step10/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step10/</guid>
      <description>In order to utilize a saved model drag the Cellpose model file (a file with a very long name) into JIPipe. This will create a File list node as usual.
Alternatively, you can also create a File list node manually and use the file browser to select the Cellpose mode (red arrows).
Cellpose model files look for example like this: &amp;ldquo;cellpose_residual_on_style_on_concatenation_off_training_2022_10_04_17_53_41.794691&amp;rdquo;
We do not recommend to rename them, as Cellpose might look for vital information in the file name and will fail to load the model if the information is missing.</description>
    </item>
    
    <item>
      <title>Step 11</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step11/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step11/</guid>
      <description>Run the node (red arrow 1) and observe the Cache browser (red arrow 2). The segmented peroxisomes are now illustrated by the selected outputs of the Cellpose (2.x) node, e.g., in this example, we set Labels, ROI, Probabilities and XY flows as outputs (red rectangle), and selected Probabilities to be displayed (red arrow 3).
You might have noticed the Label data annotation in the list. You can remove them after the training step via the Remove data annotations node.</description>
    </item>
    
    <item>
      <title>Step 12</title>
      <link>https://www.jipipe.org/tutorials/features/cellpose-2/step12/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://www.jipipe.org/tutorials/features/cellpose-2/step12/</guid>
      <description>To check the quality of the segmentation results visually, add a Convert ROI to RGB node to the UI (red arrow 1), connect it to the ROI output of the Cellpose (2.x) node (red arrow 2) and to the Test dataset (red arrow 3) of the Split data randomly (Percentage) node.
Observe the output in a viewer (red arrow 4) and notice the high quality of the segmentation (yellow circles outlining the peroxisomes).</description>
    </item>
    
  </channel>
</rss>
