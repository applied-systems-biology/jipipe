{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://applied-systems-biology.github.io/acaq5/schemas/trait-configuration.schema.json",
    "type": "object",
    "title": "Annotation configuration",
    "description": "Determines how annotations are transferred from inputs to outputs. This is for the user and independent of data annotations.",
    "required": [
        "modification",
        "transfer"
    ],
    "properties": {
        "modification": {
            "$id": "#/properties/modification",
            "type": "object",
            "title": "Annotation modification",
            "description": "Instructions on how annotations are modified.",
            "default": {},
            "examples": [
                {
                    "global": {},
                    "per-slot": {}
                }
            ],
            "required": [
                "per-slot",
                "global"
            ],
            "properties": {
                "per-slot": {
                    "$id": "#/properties/modification/properties/per-slot",
                    "type": "object",
                    "title": "Per-slot modification",
                    "description": "Map from slot name to annotation modifications. Key should be an output slot name.",
                    "default": {},
                    "additionalProperties": {
                      "$ref": "https://applied-systems-biology.github.io/acaq5/schemas/trait-modifications.schema.json"
                    }
                },
                "global": {
                    "title": "Global modification",
                    "description": "Modifications applied to any slot",
                    "$ref": "https://applied-systems-biology.github.io/acaq5/schemas/trait-modifications.schema.json"
                }
            }
        },
        "transfer": {
            "$id": "#/properties/transfer",
            "type": "object",
            "title": "Annotation transfer behavior",
            "description": "Determines how annotations are transferred through the algorithm",
            "default": {},
            "examples": [
                {
                    "transfers": [],
                    "transfer-all-to-all": true
                }
            ],
            "required": [
                "transfers",
                "transfer-all-to-all"
            ],
            "properties": {
                "transfers": {
                    "$ref": "https://applied-systems-biology.github.io/acaq5/schemas/trait-transfer.schema.json"
                },
                "transfer-all-to-all": {
                    "$id": "#/properties/transfer/properties/transfer-all-to-all",
                    "type": "boolean",
                    "title": "Transfer from all input slots to all output slots",
                    "description": "Transfers the union of all input slot annotations to all output slots. This overrides any custom defined transfers.",
                    "default": false,
                    "examples": [
                        true
                    ]
                }
            }
        }
    }
}
